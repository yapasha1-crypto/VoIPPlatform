2026-02-13 21:04:57 [INF] ðŸš€ ØªØ·Ø¨ÙŠÙ‚ VoIPPlatform Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚...
2026-02-13 21:04:58 [WRN] No store type was specified for the decimal property 'LocalBalance' on entity type 'CustomerAccount'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-13 21:04:58 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-13 21:04:58 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-13 21:04:58 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-13 21:04:58 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-13 21:04:58 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-02-13 21:04:59 [INF] No migrations were applied. The database is already up to date.
2026-02-13 21:04:59 [INF] âœ… Database migrated successfully.
2026-02-13 21:04:59 [INF] âœ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„
2026-02-13 21:04:59 [INF] User profile is available. Using 'C:\Users\mejer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-13 21:04:59 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5004: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2026-02-13 21:04:59 [FTL] âŒ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØªÙˆÙ‚Ù Ø¨Ø³Ø¨Ø¨ Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹
System.IO.IOException: Failed to bind to address http://127.0.0.1:5004: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in C:\Users\mejer\Desktop\VoIPPlatform\VoIPPlatform.API\VoIPPlatform.API\Program.cs:line 231
2026-02-13 22:26:17 [INF] ðŸš€ ØªØ·Ø¨ÙŠÙ‚ VoIPPlatform Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚...
2026-02-13 22:26:18 [WRN] No store type was specified for the decimal property 'LocalBalance' on entity type 'CustomerAccount'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-13 22:26:22 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-13 22:26:22 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-13 22:26:22 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-13 22:26:22 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-13 22:26:22 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-02-13 22:26:22 [INF] No migrations were applied. The database is already up to date.
2026-02-13 22:26:22 [INF] âœ… Database migrated successfully.
2026-02-13 22:26:22 [INF] âœ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„
2026-02-13 22:26:22 [INF] User profile is available. Using 'C:\Users\mejer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-13 22:26:22 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5004: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2026-02-13 22:26:22 [FTL] âŒ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ØªÙˆÙ‚Ù Ø¨Ø³Ø¨Ø¨ Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹
System.IO.IOException: Failed to bind to address http://127.0.0.1:5004: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in C:\Users\mejer\Desktop\VoIPPlatform\VoIPPlatform.API\VoIPPlatform.API\Program.cs:line 231
2026-02-13 22:27:31 [INF] ðŸš€ ØªØ·Ø¨ÙŠÙ‚ VoIPPlatform Ù‚ÙŠØ¯ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚...
2026-02-13 22:27:32 [WRN] No store type was specified for the decimal property 'LocalBalance' on entity type 'CustomerAccount'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2026-02-13 22:27:33 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-13 22:27:33 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-13 22:27:33 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2026-02-13 22:27:33 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2026-02-13 22:27:33 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2026-02-13 22:27:33 [INF] No migrations were applied. The database is already up to date.
2026-02-13 22:27:33 [INF] âœ… Database migrated successfully.
2026-02-13 22:27:33 [INF] âœ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„
2026-02-13 22:27:33 [INF] User profile is available. Using 'C:\Users\mejer\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-02-13 22:27:34 [INF] Now listening on: http://localhost:5004
2026-02-13 22:27:34 [INF] Application started. Press Ctrl+C to shut down.
2026-02-13 22:27:34 [INF] Hosting environment: Development
2026-02-13 22:27:34 [INF] Content root path: C:\Users\mejer\Desktop\VoIPPlatform\VoIPPlatform.API\VoIPPlatform.API
2026-02-13 22:35:58 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/me - null null
2026-02-13 22:35:58 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/me - null null
2026-02-13 22:35:58 [WRN] Failed to determine the https port for redirect.
2026-02-13 22:35:58 [INF] CORS policy execution successful.
2026-02-13 22:35:58 [INF] CORS policy execution successful.
2026-02-13 22:35:58 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/me - 204 null null 104.714ms
2026-02-13 22:35:58 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/me - 204 null null 104.7143ms
2026-02-13 22:35:58 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Auth/me - null null
2026-02-13 22:35:58 [INF] CORS policy execution successful.
2026-02-13 22:35:58 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '13/02/2026 20:33:45', Current time (UTC): '13/02/2026 21:35:58'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-02-13 22:35:58 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '13/02/2026 20:33:45', Current time (UTC): '13/02/2026 21:35:58'.
2026-02-13 22:35:58 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-02-13 22:35:58 [INF] AuthenticationScheme: Bearer was challenged.
2026-02-13 22:35:58 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Auth/me - 401 0 null 130.8985ms
2026-02-13 22:35:58 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Auth/me - null null
2026-02-13 22:35:58 [INF] CORS policy execution successful.
2026-02-13 22:35:58 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '13/02/2026 20:33:45', Current time (UTC): '13/02/2026 21:35:58'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2026-02-13 22:35:58 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '13/02/2026 20:33:45', Current time (UTC): '13/02/2026 21:35:58'.
2026-02-13 22:35:58 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2026-02-13 22:35:58 [INF] AuthenticationScheme: Bearer was challenged.
2026-02-13 22:35:58 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Auth/me - 401 0 null 24.7869ms
2026-02-13 22:36:16 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/login - null null
2026-02-13 22:36:16 [INF] CORS policy execution successful.
2026-02-13 22:36:16 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/login - 204 null null 0.6307ms
2026-02-13 22:36:16 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/Auth/login - application/json 50
2026-02-13 22:36:16 [INF] CORS policy execution successful.
2026-02-13 22:36:16 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.AuthController.Login (VoIPPlatform.API)'
2026-02-13 22:36:16 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller VoIPPlatform.API.Controllers.AuthController (VoIPPlatform.API).
2026-02-13 22:36:17 [INF] Executed DbCommand (51ms) [Parameters=[@__ToLower_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE LOWER([u].[Username]) = @__ToLower_0
2026-02-13 22:36:17 [INF] Login Debug - User: company
2026-02-13 22:36:17 [INF] Login Debug - Stored Hash: oQnjaUetVt4dyhzEnw74rJrZp7GqDfQfs8TLc8H/Aeo=
2026-02-13 22:36:17 [INF] Login Debug - Input Password Length: 13
2026-02-13 22:36:17 [INF] Login Debug - Input Hash:  BYDXleov5tsDVl/gKZvgnU1Okjsv35eXSwJNEfPK6I4=
2026-02-13 22:36:17 [INF] Login Debug - Match: false
2026-02-13 22:36:17 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType10`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-13 22:36:17 [INF] Executed action VoIPPlatform.API.Controllers.AuthController.Login (VoIPPlatform.API) in 919.8521ms
2026-02-13 22:36:17 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.AuthController.Login (VoIPPlatform.API)'
2026-02-13 22:36:17 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/Auth/login - 401 null application/json; charset=utf-8 967.1059ms
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/login - null null
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/login - 204 null null 0.4962ms
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/Auth/login - application/json 48
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.AuthController.Login (VoIPPlatform.API)'
2026-02-13 22:36:37 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller VoIPPlatform.API.Controllers.AuthController (VoIPPlatform.API).
2026-02-13 22:36:37 [INF] Executed DbCommand (1ms) [Parameters=[@__ToLower_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE LOWER([u].[Username]) = @__ToLower_0
2026-02-13 22:36:37 [INF] Login Debug - User: company
2026-02-13 22:36:37 [INF] Login Debug - Stored Hash: oQnjaUetVt4dyhzEnw74rJrZp7GqDfQfs8TLc8H/Aeo=
2026-02-13 22:36:37 [INF] Login Debug - Input Password Length: 12
2026-02-13 22:36:37 [INF] Login Debug - Input Hash:  oQnjaUetVt4dyhzEnw74rJrZp7GqDfQfs8TLc8H/Aeo=
2026-02-13 22:36:37 [INF] Login Debug - Match: true
2026-02-13 22:36:37 [INF] Executed DbCommand (30ms) [Parameters=[@p25='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000), @p6='?' (Size = 450), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (Size = 450), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (DbType = DateTime2), @p24='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccountBalance] = @p0, [ActiveCalls] = @p1, [Address] = @p2, [BillingType] = @p3, [ChannelRate] = @p4, [City] = @p5, [Country] = @p6, [CreatedAt] = @p7, [Email] = @p8, [FirstName] = @p9, [IsActive] = @p10, [IsEmailVerified] = @p11, [LastLoginAt] = @p12, [LastName] = @p13, [MaxConcurrentCalls] = @p14, [ParentUserId] = @p15, [PasswordHash] = @p16, [PhoneNumber] = @p17, [PostalCode] = @p18, [ResellerId] = @p19, [Role] = @p20, [TariffPlanId] = @p21, [TaxRegistrationNumber] = @p22, [UpdatedAt] = @p23, [Username] = @p24
OUTPUT 1
WHERE [Id] = @p25;
2026-02-13 22:36:37 [INF] Successful login: company
2026-02-13 22:36:37 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType12`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType11`3[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:36:37 [INF] Executed action VoIPPlatform.API.Controllers.AuthController.Login (VoIPPlatform.API) in 312.208ms
2026-02-13 22:36:37 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.AuthController.Login (VoIPPlatform.API)'
2026-02-13 22:36:37 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/Auth/login - 200 null application/json; charset=utf-8 316.2483ms
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/Dashboard/company-stats - null null
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/Dashboard/company-stats - 204 null null 3.1438ms
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/CallRecords/channel-info - null null
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/CallRecords/channel-info - 204 null null 0.6163ms
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/Dashboard/company-stats - null null
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/CallRecords/channel-info - null null
2026-02-13 22:36:37 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/Dashboard/company-stats - 204 null null 2.8399ms
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Dashboard/company-stats - null null
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/CallRecords/channel-info - 204 null null 1.5452ms
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/CallRecords/channel-info - null null
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.CallRecordsController.GetChannelInfo (VoIPPlatform.API)'
2026-02-13 22:36:37 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.DashboardController.GetCompanyStats (VoIPPlatform.API)'
2026-02-13 22:36:37 [INF] Route matched with {action = "GetCompanyStats", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCompanyStats() on controller VoIPPlatform.API.Controllers.DashboardController (VoIPPlatform.API).
2026-02-13 22:36:37 [INF] Route matched with {action = "GetChannelInfo", controller = "CallRecords"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChannelInfo() on controller VoIPPlatform.API.Controllers.CallRecordsController (VoIPPlatform.API).
2026-02-13 22:36:37 [INF] Executed DbCommand (18ms) [Parameters=[@__username_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 AND [u].[Role] = N'Company'
2026-02-13 22:36:37 [INF] Executed DbCommand (25ms) [Parameters=[@__username_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2026-02-13 22:36:37 [INF] Fetching company stats for company (ID: 4056)
2026-02-13 22:36:37 [INF] Executed DbCommand (4ms) [Parameters=[@__companyId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[ParentUserId] = @__companyId_0 AND [u].[Role] = N'User'
2026-02-13 22:36:37 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username], [u0].[Id], [u0].[AccountBalance], [u0].[ActiveCalls], [u0].[Address], [u0].[BillingType], [u0].[ChannelRate], [u0].[City], [u0].[Country], [u0].[CreatedAt], [u0].[Email], [u0].[FirstName], [u0].[IsActive], [u0].[IsEmailVerified], [u0].[LastLoginAt], [u0].[LastName], [u0].[MaxConcurrentCalls], [u0].[ParentUserId], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PostalCode], [u0].[ResellerId], [u0].[Role], [u0].[TariffPlanId], [u0].[TaxRegistrationNumber], [u0].[UpdatedAt], [u0].[Username]
FROM [Users] AS [u]
LEFT JOIN [Users] AS [u0] ON [u].[ParentUserId] = [u0].[Id]
WHERE [u].[Id] = @__userId_0
2026-02-13 22:36:37 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[VoIPPlatform.API.Services.ChannelInfo, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:36:37 [INF] Executed DbCommand (27ms) [Parameters=[@__parentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id]
FROM [Users] AS [u]
WHERE [u].[ParentUserId] = @__parentId_0
2026-02-13 22:36:37 [INF] Executed DbCommand (1ms) [Parameters=[@__parentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id]
FROM [Users] AS [u]
WHERE [u].[ParentUserId] = @__parentId_0
2026-02-13 22:36:37 [INF] Executed action VoIPPlatform.API.Controllers.CallRecordsController.GetChannelInfo (VoIPPlatform.API) in 154.5754ms
2026-02-13 22:36:37 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.CallRecordsController.GetChannelInfo (VoIPPlatform.API)'
2026-02-13 22:36:37 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/CallRecords/channel-info - 200 null application/json; charset=utf-8 172.4932ms
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/CallRecords/channel-info - null null
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.CallRecordsController.GetChannelInfo (VoIPPlatform.API)'
2026-02-13 22:36:37 [INF] Route matched with {action = "GetChannelInfo", controller = "CallRecords"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetChannelInfo() on controller VoIPPlatform.API.Controllers.CallRecordsController (VoIPPlatform.API).
2026-02-13 22:36:37 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2026-02-13 22:36:37 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username], [u0].[Id], [u0].[AccountBalance], [u0].[ActiveCalls], [u0].[Address], [u0].[BillingType], [u0].[ChannelRate], [u0].[City], [u0].[Country], [u0].[CreatedAt], [u0].[Email], [u0].[FirstName], [u0].[IsActive], [u0].[IsEmailVerified], [u0].[LastLoginAt], [u0].[LastName], [u0].[MaxConcurrentCalls], [u0].[ParentUserId], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PostalCode], [u0].[ResellerId], [u0].[Role], [u0].[TariffPlanId], [u0].[TaxRegistrationNumber], [u0].[UpdatedAt], [u0].[Username]
FROM [Users] AS [u]
LEFT JOIN [Users] AS [u0] ON [u].[ParentUserId] = [u0].[Id]
WHERE [u].[Id] = @__userId_0
2026-02-13 22:36:37 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[VoIPPlatform.API.Services.ChannelInfo, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:36:37 [INF] Executed action VoIPPlatform.API.Controllers.CallRecordsController.GetChannelInfo (VoIPPlatform.API) in 4.9952ms
2026-02-13 22:36:37 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.CallRecordsController.GetChannelInfo (VoIPPlatform.API)'
2026-02-13 22:36:37 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/CallRecords/channel-info - 200 null application/json; charset=utf-8 6.7372ms
2026-02-13 22:36:37 [INF] Executed DbCommand (47ms) [Parameters=[@__childIds_0='?' (Size = 4000), @__today_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CalleeId], [c].[CallerId], [c].[Cost], [c].[Duration], [c].[StartTime], [c].[Status], [c].[UserId]
FROM [CallRecords] AS [c]
WHERE [c].[UserId] IN (
    SELECT [c0].[value]
    FROM OPENJSON(@__childIds_0) WITH ([value] int '$') AS [c0]
) AND [c].[StartTime] >= @__today_1
2026-02-13 22:36:37 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[VoIPPlatform.API.Services.CompanyStatsDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:36:37 [INF] Executed action VoIPPlatform.API.Controllers.DashboardController.GetCompanyStats (VoIPPlatform.API) in 264.3001ms
2026-02-13 22:36:37 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.DashboardController.GetCompanyStats (VoIPPlatform.API)'
2026-02-13 22:36:37 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Dashboard/company-stats - 200 null application/json; charset=utf-8 283.7145ms
2026-02-13 22:36:37 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Dashboard/company-stats - null null
2026-02-13 22:36:37 [INF] CORS policy execution successful.
2026-02-13 22:36:37 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.DashboardController.GetCompanyStats (VoIPPlatform.API)'
2026-02-13 22:36:37 [INF] Route matched with {action = "GetCompanyStats", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCompanyStats() on controller VoIPPlatform.API.Controllers.DashboardController (VoIPPlatform.API).
2026-02-13 22:36:37 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0 AND [u].[Role] = N'Company'
2026-02-13 22:36:37 [INF] Fetching company stats for company (ID: 4056)
2026-02-13 22:36:37 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[ParentUserId] = @__companyId_0 AND [u].[Role] = N'User'
2026-02-13 22:36:37 [INF] Executed DbCommand (1ms) [Parameters=[@__parentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id]
FROM [Users] AS [u]
WHERE [u].[ParentUserId] = @__parentId_0
2026-02-13 22:36:37 [INF] Executed DbCommand (1ms) [Parameters=[@__parentId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id]
FROM [Users] AS [u]
WHERE [u].[ParentUserId] = @__parentId_0
2026-02-13 22:36:37 [INF] Executed DbCommand (1ms) [Parameters=[@__childIds_0='?' (Size = 4000), @__today_1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CalleeId], [c].[CallerId], [c].[Cost], [c].[Duration], [c].[StartTime], [c].[Status], [c].[UserId]
FROM [CallRecords] AS [c]
WHERE [c].[UserId] IN (
    SELECT [c0].[value]
    FROM OPENJSON(@__childIds_0) WITH ([value] int '$') AS [c0]
) AND [c].[StartTime] >= @__today_1
2026-02-13 22:36:37 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[VoIPPlatform.API.Services.CompanyStatsDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:36:38 [INF] Executed action VoIPPlatform.API.Controllers.DashboardController.GetCompanyStats (VoIPPlatform.API) in 17.6042ms
2026-02-13 22:36:38 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.DashboardController.GetCompanyStats (VoIPPlatform.API)'
2026-02-13 22:36:38 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Dashboard/company-stats - 200 null application/json; charset=utf-8 19.7798ms
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - 204 null null 2.1733ms
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - 204 null null 10.1062ms
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - 204 null null 0.2349ms
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - 204 null null 1.1541ms
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - 204 null null 0.2519ms
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - 204 null null 0.2133ms
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Route matched with {action = "GetWalletBalance", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.WalletBalanceDto]] GetWalletBalance() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:40 [INF] Stripe API Key configured successfully
2026-02-13 22:36:40 [INF] Route matched with {action = "GetBillingInfo", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.BillingInfoDto]] GetBillingInfo() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:40 [INF] Stripe API Key configured successfully
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/history - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Route matched with {action = "GetPaymentHistory", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[VoIPPlatform.API.Controllers.PaymentDto]]] GetPaymentHistory() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:40 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:36:40 [INF] Stripe API Key configured successfully
2026-02-13 22:36:40 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.BillingInfoDto'.
2026-02-13 22:36:40 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Balance], [w].[CreatedAt], [w].[Currency], [w].[UpdatedAt], [w].[UserId]
FROM [Wallets] AS [w]
WHERE [w].[UserId] = @__userId_0
2026-02-13 22:36:40 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API) in 23.219ms
2026-02-13 22:36:40 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - 200 null application/json; charset=utf-8 49.5216ms
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Route matched with {action = "GetBillingInfo", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.BillingInfoDto]] GetBillingInfo() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:40 [INF] Stripe API Key configured successfully
2026-02-13 22:36:40 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.WalletBalanceDto'.
2026-02-13 22:36:40 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:36:40 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.BillingInfoDto'.
2026-02-13 22:36:40 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API) in 15.1892ms
2026-02-13 22:36:40 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - 200 null application/json; charset=utf-8 16.1274ms
2026-02-13 22:36:40 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API) in 68.9984ms
2026-02-13 22:36:40 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - 200 null application/json; charset=utf-8 79.2746ms
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Route matched with {action = "GetWalletBalance", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.WalletBalanceDto]] GetWalletBalance() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:40 [INF] Executed DbCommand (23ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[TransactionDate] DESC
2026-02-13 22:36:40 [INF] Stripe API Key configured successfully
2026-02-13 22:36:40 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[VoIPPlatform.API.Controllers.PaymentDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:36:40 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Balance], [w].[CreatedAt], [w].[Currency], [w].[UpdatedAt], [w].[UserId]
FROM [Wallets] AS [w]
WHERE [w].[UserId] = @__userId_0
2026-02-13 22:36:40 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.WalletBalanceDto'.
2026-02-13 22:36:40 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API) in 2.9037ms
2026-02-13 22:36:40 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - 200 null application/json; charset=utf-8 3.8656ms
2026-02-13 22:36:40 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API) in 50.8692ms
2026-02-13 22:36:40 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/history - 200 null application/json; charset=utf-8 57.6621ms
2026-02-13 22:36:40 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/history - null null
2026-02-13 22:36:40 [INF] CORS policy execution successful.
2026-02-13 22:36:40 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Route matched with {action = "GetPaymentHistory", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[VoIPPlatform.API.Controllers.PaymentDto]]] GetPaymentHistory() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:40 [INF] Stripe API Key configured successfully
2026-02-13 22:36:40 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[TransactionDate] DESC
2026-02-13 22:36:40 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[VoIPPlatform.API.Controllers.PaymentDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:36:40 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API) in 2.7085ms
2026-02-13 22:36:40 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:36:40 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/history - 200 null application/json; charset=utf-8 4.3802ms
2026-02-13 22:36:43 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:36:43 [INF] CORS policy execution successful.
2026-02-13 22:36:43 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/history - null null
2026-02-13 22:36:43 [INF] CORS policy execution successful.
2026-02-13 22:36:43 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:36:43 [INF] Route matched with {action = "GetWalletBalance", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.WalletBalanceDto]] GetWalletBalance() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:43 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:36:43 [INF] Route matched with {action = "GetPaymentHistory", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[VoIPPlatform.API.Controllers.PaymentDto]]] GetPaymentHistory() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:43 [INF] Stripe API Key configured successfully
2026-02-13 22:36:43 [INF] Stripe API Key configured successfully
2026-02-13 22:36:43 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:36:43 [INF] CORS policy execution successful.
2026-02-13 22:36:43 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:36:43 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[TransactionDate] DESC
2026-02-13 22:36:43 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[VoIPPlatform.API.Controllers.PaymentDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:36:43 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API) in 6.2156ms
2026-02-13 22:36:43 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:36:43 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/history - 200 null application/json; charset=utf-8 7.4122ms
2026-02-13 22:36:43 [INF] Route matched with {action = "GetBillingInfo", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.BillingInfoDto]] GetBillingInfo() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:43 [INF] Stripe API Key configured successfully
2026-02-13 22:36:43 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Balance], [w].[CreatedAt], [w].[Currency], [w].[UpdatedAt], [w].[UserId]
FROM [Wallets] AS [w]
WHERE [w].[UserId] = @__userId_0
2026-02-13 22:36:43 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.WalletBalanceDto'.
2026-02-13 22:36:43 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API) in 9.6917ms
2026-02-13 22:36:43 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:36:43 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - 200 null application/json; charset=utf-8 10.712ms
2026-02-13 22:36:43 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:36:43 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.BillingInfoDto'.
2026-02-13 22:36:43 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API) in 9.0277ms
2026-02-13 22:36:43 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:36:43 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - 200 null application/json; charset=utf-8 11.7626ms
2026-02-13 22:36:44 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:36:44 [INF] CORS policy execution successful.
2026-02-13 22:36:44 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:36:44 [INF] Route matched with {action = "GetWalletBalance", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.WalletBalanceDto]] GetWalletBalance() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:44 [INF] Stripe API Key configured successfully
2026-02-13 22:36:44 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/history - null null
2026-02-13 22:36:44 [INF] CORS policy execution successful.
2026-02-13 22:36:44 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:36:44 [INF] Route matched with {action = "GetPaymentHistory", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[VoIPPlatform.API.Controllers.PaymentDto]]] GetPaymentHistory() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:44 [INF] Stripe API Key configured successfully
2026-02-13 22:36:44 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:36:44 [INF] CORS policy execution successful.
2026-02-13 22:36:44 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:36:44 [INF] Route matched with {action = "GetBillingInfo", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.BillingInfoDto]] GetBillingInfo() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:36:44 [INF] Stripe API Key configured successfully
2026-02-13 22:36:44 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[TransactionDate] DESC
2026-02-13 22:36:44 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:36:44 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[VoIPPlatform.API.Controllers.PaymentDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:36:44 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API) in 6.5998ms
2026-02-13 22:36:44 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:36:44 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.BillingInfoDto'.
2026-02-13 22:36:44 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/history - 200 null application/json; charset=utf-8 7.9533ms
2026-02-13 22:36:44 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API) in 3.6335ms
2026-02-13 22:36:44 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:36:44 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - 200 null application/json; charset=utf-8 4.7745ms
2026-02-13 22:36:44 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Balance], [w].[CreatedAt], [w].[Currency], [w].[UpdatedAt], [w].[UserId]
FROM [Wallets] AS [w]
WHERE [w].[UserId] = @__userId_0
2026-02-13 22:36:44 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.WalletBalanceDto'.
2026-02-13 22:36:44 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API) in 12.0161ms
2026-02-13 22:36:44 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:36:44 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - 200 null application/json; charset=utf-8 14.8843ms
2026-02-13 22:37:11 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/stripe/create-intent - null null
2026-02-13 22:37:11 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/stripe/create-intent - null null
2026-02-13 22:37:11 [INF] CORS policy execution successful.
2026-02-13 22:37:11 [INF] CORS policy execution successful.
2026-02-13 22:37:11 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/stripe/create-intent - 204 null null 0.7969ms
2026-02-13 22:37:11 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/stripe/create-intent - 204 null null 0.8792ms
2026-02-13 22:37:11 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/payments/stripe/create-intent - application/json 30
2026-02-13 22:37:11 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/payments/stripe/create-intent - application/json 30
2026-02-13 22:37:11 [INF] CORS policy execution successful.
2026-02-13 22:37:11 [INF] CORS policy execution successful.
2026-02-13 22:37:11 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.CreateStripePaymentIntent (VoIPPlatform.API)'
2026-02-13 22:37:11 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.CreateStripePaymentIntent (VoIPPlatform.API)'
2026-02-13 22:37:11 [INF] Route matched with {action = "CreateStripePaymentIntent", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.StripePaymentIntentDto]] CreateStripePaymentIntent(VoIPPlatform.API.Controllers.StripePaymentRequestDto) on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:11 [INF] Stripe API Key configured successfully
2026-02-13 22:37:11 [INF] Route matched with {action = "CreateStripePaymentIntent", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.StripePaymentIntentDto]] CreateStripePaymentIntent(VoIPPlatform.API.Controllers.StripePaymentRequestDto) on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:11 [INF] Stripe API Key configured successfully
2026-02-13 22:37:11 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:37:11 [INF] Executed DbCommand (28ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:37:11 [INF] Creating Stripe PaymentIntent for User 4056: Base=50, Tax=0 (Reverse Charge (0% VAT)), Total=50
2026-02-13 22:37:11 [INF] Creating Stripe PaymentIntent for User 4056: Base=50, Tax=0 (Reverse Charge (0% VAT)), Total=50
2026-02-13 22:37:12 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - application/json; charset=utf-8 2505
2026-02-13 22:37:12 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:12 [INF] Stripe PaymentIntent created: pi_3T0U32J1lJebwHjz0FHOVBLB, Amount=5000 cents, ClientSecret=pi_3T0U32J1lJebwHjz0...
2026-02-13 22:37:12 [INF] Stripe PaymentIntent created: pi_3T0U32J1lJebwHjz0UQXmRXi, Amount=5000 cents, ClientSecret=pi_3T0U32J1lJebwHjz0...
2026-02-13 22:37:12 [INF] Stripe PaymentIntent created for user 4056: pi_3T0U32J1lJebwHjz0UQXmRXi
2026-02-13 22:37:12 [INF] Stripe PaymentIntent created for user 4056: pi_3T0U32J1lJebwHjz0FHOVBLB
2026-02-13 22:37:12 [INF] Route matched with {action = "StripeWebhook", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StripeWebhook() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:12 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.StripePaymentIntentDto'.
2026-02-13 22:37:12 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.StripePaymentIntentDto'.
2026-02-13 22:37:12 [INF] Stripe API Key configured successfully
2026-02-13 22:37:12 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.CreateStripePaymentIntent (VoIPPlatform.API) in 1081.472ms
2026-02-13 22:37:12 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.CreateStripePaymentIntent (VoIPPlatform.API) in 1072.5217ms
2026-02-13 22:37:12 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.CreateStripePaymentIntent (VoIPPlatform.API)'
2026-02-13 22:37:12 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.CreateStripePaymentIntent (VoIPPlatform.API)'
2026-02-13 22:37:12 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/payments/stripe/create-intent - 200 null application/json; charset=utf-8 1098.1356ms
2026-02-13 22:37:12 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/payments/stripe/create-intent - 200 null application/json; charset=utf-8 1097.7495ms
2026-02-13 22:37:12 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - application/json; charset=utf-8 2505
2026-02-13 22:37:12 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:12 [INF] Route matched with {action = "StripeWebhook", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StripeWebhook() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:12 [INF] Stripe API Key configured successfully
2026-02-13 22:37:12 [INF] Stripe webhook received: payment_intent.created, ID=evt_3T0U32J1lJebwHjz0QQJQkAg
2026-02-13 22:37:12 [INF] Stripe webhook received: payment_intent.created, ID=evt_3T0U32J1lJebwHjz0TP8ZfTr
2026-02-13 22:37:12 [INF] Unhandled Stripe event type: payment_intent.created
2026-02-13 22:37:12 [INF] Unhandled Stripe event type: payment_intent.created
2026-02-13 22:37:12 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-13 22:37:12 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-13 22:37:12 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API) in 130.2183ms
2026-02-13 22:37:12 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API) in 75.7792ms
2026-02-13 22:37:12 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:12 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:12 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - 200 null application/json; charset=utf-8 158.2017ms
2026-02-13 22:37:12 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - 200 null application/json; charset=utf-8 78.0955ms
2026-02-13 22:37:36 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - application/json; charset=utf-8 2546
2026-02-13 22:37:36 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:36 [INF] Route matched with {action = "StripeWebhook", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StripeWebhook() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:36 [INF] Stripe API Key configured successfully
2026-02-13 22:37:36 [INF] Stripe webhook received: payment_intent.succeeded, ID=evt_3T0U32J1lJebwHjz0HoGFcx1
2026-02-13 22:37:36 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - application/json; charset=utf-8 3914
2026-02-13 22:37:36 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:36 [INF] Route matched with {action = "StripeWebhook", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StripeWebhook() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:36 [INF] Stripe API Key configured successfully
2026-02-13 22:37:36 [INF] Stripe webhook received: charge.succeeded, ID=evt_3T0U32J1lJebwHjz0dlW471A
2026-02-13 22:37:36 [INF] Unhandled Stripe event type: charge.succeeded
2026-02-13 22:37:36 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-13 22:37:36 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API) in 91.1783ms
2026-02-13 22:37:36 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:36 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - 200 null application/json; charset=utf-8 92.0185ms
2026-02-13 22:37:37 [INF] Executed DbCommand (5ms) [Parameters=[@__paymentIntentId_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[ExternalTransactionId] = @__paymentIntentId_0
2026-02-13 22:37:37 [INF] Confirming payment for User 4056: PaymentIntent=pi_3T0U32J1lJebwHjz0UQXmRXi, Total=50.00
2026-02-13 22:37:37 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:37:37 [INF] Executed DbCommand (3ms) [Parameters=[@__prefix_0_startswith='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[InvoiceNumber]
FROM [Payments] AS [p]
WHERE [p].[InvoiceNumber] LIKE @__prefix_0_startswith ESCAPE N'\'
ORDER BY [p].[InvoiceNumber] DESC
2026-02-13 22:37:37 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Balance], [w].[CreatedAt], [w].[Currency], [w].[UpdatedAt], [w].[UserId]
FROM [Wallets] AS [w]
WHERE [w].[UserId] = @__userId_0
2026-02-13 22:37:37 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (Size = 450), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (Size = 450), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Int32), @p14='?' (DbType = Int32), @p12='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p13='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Payments] ([Amount], [CreatedAt], [ExternalTransactionId], [InvoiceNumber], [InvoicePdfPath], [Notes], [PaymentMethod], [Status], [TaxAmount], [TotalPaid], [TransactionDate], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
UPDATE [Wallets] SET [Balance] = @p12, [UpdatedAt] = @p13
OUTPUT 1
WHERE [Id] = @p14;
2026-02-13 22:37:38 [INF] Generated invoice PDF for payment 1: C:\Users\mejer\Desktop\VoIPPlatform\VoIPPlatform.API\VoIPPlatform.API\wwwroot\invoices\4056\INV-2026-000001.pdf
2026-02-13 22:37:38 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Payments] SET [InvoicePdfPath] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2026-02-13 22:37:38 [INF] Generated invoice PDF: /invoices/4056/INV-2026-000001.pdf for payment 1
2026-02-13 22:37:38 [INF] User 4056 topped up wallet: Amount=50.00, Tax=0.00, Total=50.00, Invoice=INV-2026-000001
2026-02-13 22:37:38 [INF] Payment confirmed successfully: PaymentId=1, Invoice=INV-2026-000001
2026-02-13 22:37:38 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-13 22:37:38 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API) in 1302.1929ms
2026-02-13 22:37:38 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:38 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - 200 null application/json; charset=utf-8 1303.6319ms
2026-02-13 22:37:39 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - application/json; charset=utf-8 4139
2026-02-13 22:37:39 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:39 [INF] Route matched with {action = "StripeWebhook", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] StripeWebhook() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:39 [INF] Stripe API Key configured successfully
2026-02-13 22:37:39 [INF] Stripe webhook received: charge.updated, ID=evt_3T0U32J1lJebwHjz0mvVbzch
2026-02-13 22:37:39 [INF] Unhandled Stripe event type: charge.updated
2026-02-13 22:37:39 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType37`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-02-13 22:37:39 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API) in 13.8411ms
2026-02-13 22:37:39 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.StripeWebhook (VoIPPlatform.API)'
2026-02-13 22:37:39 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/payments/stripe/webhook - 200 null application/json; charset=utf-8 14.8996ms
2026-02-13 22:37:39 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:37:39 [INF] CORS policy execution successful.
2026-02-13 22:37:39 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - 204 null null 0.526ms
2026-02-13 22:37:39 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - null null
2026-02-13 22:37:39 [INF] CORS policy execution successful.
2026-02-13 22:37:39 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - 204 null null 0.4107ms
2026-02-13 22:37:39 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:37:39 [INF] CORS policy execution successful.
2026-02-13 22:37:39 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - 204 null null 0.1279ms
2026-02-13 22:37:39 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:37:39 [INF] CORS policy execution successful.
2026-02-13 22:37:39 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:37:39 [INF] Route matched with {action = "GetWalletBalance", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.WalletBalanceDto]] GetWalletBalance() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:39 [INF] Stripe API Key configured successfully
2026-02-13 22:37:39 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/history - null null
2026-02-13 22:37:39 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:37:39 [INF] CORS policy execution successful.
2026-02-13 22:37:39 [INF] CORS policy execution successful.
2026-02-13 22:37:39 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:37:39 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:37:39 [INF] Route matched with {action = "GetBillingInfo", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.BillingInfoDto]] GetBillingInfo() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:39 [INF] Route matched with {action = "GetPaymentHistory", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[VoIPPlatform.API.Controllers.PaymentDto]]] GetPaymentHistory() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:37:39 [INF] Stripe API Key configured successfully
2026-02-13 22:37:39 [INF] Stripe API Key configured successfully
2026-02-13 22:37:39 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Balance], [w].[CreatedAt], [w].[Currency], [w].[UpdatedAt], [w].[UserId]
FROM [Wallets] AS [w]
WHERE [w].[UserId] = @__userId_0
2026-02-13 22:37:39 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.WalletBalanceDto'.
2026-02-13 22:37:39 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API) in 5.4286ms
2026-02-13 22:37:39 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:37:39 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - 200 null application/json; charset=utf-8 7.6039ms
2026-02-13 22:37:39 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:37:39 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.BillingInfoDto'.
2026-02-13 22:37:39 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API) in 4.2686ms
2026-02-13 22:37:39 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:37:39 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - 200 null application/json; charset=utf-8 5.091ms
2026-02-13 22:37:39 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[TransactionDate] DESC
2026-02-13 22:37:39 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[VoIPPlatform.API.Controllers.PaymentDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:37:39 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API) in 14.4666ms
2026-02-13 22:37:39 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:37:39 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/history - 200 null application/json; charset=utf-8 15.5069ms
2026-02-13 22:38:41 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/1/invoice.pdf - null null
2026-02-13 22:38:41 [INF] CORS policy execution successful.
2026-02-13 22:38:41 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/1/invoice.pdf - 204 null null 0.8235ms
2026-02-13 22:38:41 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/1/invoice.pdf - null null
2026-02-13 22:38:41 [INF] CORS policy execution successful.
2026-02-13 22:38:41 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.DownloadInvoice (VoIPPlatform.API)'
2026-02-13 22:38:41 [INF] Route matched with {action = "DownloadInvoice", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DownloadInvoice(Int32) on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:38:41 [INF] Stripe API Key configured successfully
2026-02-13 22:38:41 [INF] Executed DbCommand (3ms) [Parameters=[@__paymentId_0='?' (DbType = Int32), @__userId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[Id] = @__paymentId_0 AND [p].[UserId] = @__userId_1
2026-02-13 22:38:41 [INF] Executing FileContentResult, sending file with download name 'INV-2026-000001.pdf' ...
2026-02-13 22:38:41 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.DownloadInvoice (VoIPPlatform.API) in 84.5076ms
2026-02-13 22:38:41 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.DownloadInvoice (VoIPPlatform.API)'
2026-02-13 22:38:41 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/1/invoice.pdf - 200 100766 application/pdf 116.1534ms
2026-02-13 22:53:38 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/login - null null
2026-02-13 22:53:38 [INF] CORS policy execution successful.
2026-02-13 22:53:38 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/Auth/login - 204 null null 0.5003ms
2026-02-13 22:53:38 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/Auth/login - application/json 54
2026-02-13 22:53:38 [INF] CORS policy execution successful.
2026-02-13 22:53:38 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.AuthController.Login (VoIPPlatform.API)'
2026-02-13 22:53:38 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller VoIPPlatform.API.Controllers.AuthController (VoIPPlatform.API).
2026-02-13 22:53:41 [INF] Executed DbCommand (43ms) [Parameters=[@__ToLower_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE LOWER([u].[Username]) = @__ToLower_0
2026-02-13 22:53:41 [INF] Login Debug - User: MasterAdmin
2026-02-13 22:53:41 [INF] Login Debug - Stored Hash: CydmJDVDAqu3/qFkY6ZBomWrPKmocI26BFz7UKfh2EA=
2026-02-13 22:53:41 [INF] Login Debug - Input Password Length: 14
2026-02-13 22:53:41 [INF] Login Debug - Input Hash:  CydmJDVDAqu3/qFkY6ZBomWrPKmocI26BFz7UKfh2EA=
2026-02-13 22:53:41 [INF] Login Debug - Match: true
2026-02-13 22:53:41 [INF] Executed DbCommand (29ms) [Parameters=[@p25='?' (DbType = Int32), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Size = 4000), @p6='?' (Size = 450), @p7='?' (DbType = DateTime2), @p8='?' (Size = 450), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Int32), @p20='?' (Size = 450), @p21='?' (DbType = Int32), @p22='?' (Size = 4000), @p23='?' (DbType = DateTime2), @p24='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AccountBalance] = @p0, [ActiveCalls] = @p1, [Address] = @p2, [BillingType] = @p3, [ChannelRate] = @p4, [City] = @p5, [Country] = @p6, [CreatedAt] = @p7, [Email] = @p8, [FirstName] = @p9, [IsActive] = @p10, [IsEmailVerified] = @p11, [LastLoginAt] = @p12, [LastName] = @p13, [MaxConcurrentCalls] = @p14, [ParentUserId] = @p15, [PasswordHash] = @p16, [PhoneNumber] = @p17, [PostalCode] = @p18, [ResellerId] = @p19, [Role] = @p20, [TariffPlanId] = @p21, [TaxRegistrationNumber] = @p22, [UpdatedAt] = @p23, [Username] = @p24
OUTPUT 1
WHERE [Id] = @p25;
2026-02-13 22:53:41 [INF] Successful login: MasterAdmin
2026-02-13 22:53:41 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType12`5[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType11`3[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:53:41 [INF] Executed action VoIPPlatform.API.Controllers.AuthController.Login (VoIPPlatform.API) in 2893.3208ms
2026-02-13 22:53:41 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.AuthController.Login (VoIPPlatform.API)'
2026-02-13 22:53:41 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/Auth/login - 200 null application/json; charset=utf-8 2894.1521ms
2026-02-13 22:53:41 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/Dashboard/user-stats - null null
2026-02-13 22:53:41 [INF] CORS policy execution successful.
2026-02-13 22:53:41 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/Dashboard/user-stats - 204 null null 0.434ms
2026-02-13 22:53:41 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Dashboard/user-stats - null null
2026-02-13 22:53:41 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/Dashboard/user-stats - null null
2026-02-13 22:53:41 [INF] CORS policy execution successful.
2026-02-13 22:53:41 [INF] CORS policy execution successful.
2026-02-13 22:53:41 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/Dashboard/user-stats - 204 null null 0.4168ms
2026-02-13 22:53:41 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.DashboardController.GetUserStats (VoIPPlatform.API)'
2026-02-13 22:53:41 [INF] Route matched with {action = "GetUserStats", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserStats() on controller VoIPPlatform.API.Controllers.DashboardController (VoIPPlatform.API).
2026-02-13 22:53:41 [INF] Executed DbCommand (10ms) [Parameters=[@__username_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountBalance], [t].[ActiveCalls], [t].[Address], [t].[BillingType], [t].[ChannelRate], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[IsEmailVerified], [t].[LastLoginAt], [t].[LastName], [t].[MaxConcurrentCalls], [t].[ParentUserId], [t].[PasswordHash], [t].[PhoneNumber], [t].[PostalCode], [t].[ResellerId], [t].[Role], [t].[TariffPlanId], [t].[TaxRegistrationNumber], [t].[UpdatedAt], [t].[Username], [a].[Id], [a].[AccountType], [a].[Balance], [a].[CountryCode], [a].[CreatedAt], [a].[DeactivatedAt], [a].[IsActive], [a].[MonthlyUsage], [a].[RenewsAt], [a].[UserId], [a].[VirtualPhoneNumber]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Username] = @__username_0
) AS [t]
LEFT JOIN [Accounts] AS [a] ON [t].[Id] = [a].[UserId]
ORDER BY [t].[Id]
2026-02-13 22:53:41 [INF] Fetching dashboard stats for user: MasterAdmin
2026-02-13 22:53:41 [INF] Executed DbCommand (4ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CalleeId], [c].[CallerId], [c].[Cost], [c].[Duration], [c].[StartTime], [c].[Status], [c].[UserId]
FROM [CallRecords] AS [c]
WHERE [c].[UserId] = @__user_Id_0
2026-02-13 22:53:41 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType32`5[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:53:41 [INF] Executed action VoIPPlatform.API.Controllers.DashboardController.GetUserStats (VoIPPlatform.API) in 181.0404ms
2026-02-13 22:53:41 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.DashboardController.GetUserStats (VoIPPlatform.API)'
2026-02-13 22:53:41 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Dashboard/user-stats - 200 null application/json; charset=utf-8 186.0702ms
2026-02-13 22:53:41 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Dashboard/user-stats - null null
2026-02-13 22:53:41 [INF] CORS policy execution successful.
2026-02-13 22:53:41 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.DashboardController.GetUserStats (VoIPPlatform.API)'
2026-02-13 22:53:41 [INF] Route matched with {action = "GetUserStats", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserStats() on controller VoIPPlatform.API.Controllers.DashboardController (VoIPPlatform.API).
2026-02-13 22:53:41 [INF] Executed DbCommand (1ms) [Parameters=[@__username_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccountBalance], [t].[ActiveCalls], [t].[Address], [t].[BillingType], [t].[ChannelRate], [t].[City], [t].[Country], [t].[CreatedAt], [t].[Email], [t].[FirstName], [t].[IsActive], [t].[IsEmailVerified], [t].[LastLoginAt], [t].[LastName], [t].[MaxConcurrentCalls], [t].[ParentUserId], [t].[PasswordHash], [t].[PhoneNumber], [t].[PostalCode], [t].[ResellerId], [t].[Role], [t].[TariffPlanId], [t].[TaxRegistrationNumber], [t].[UpdatedAt], [t].[Username], [a].[Id], [a].[AccountType], [a].[Balance], [a].[CountryCode], [a].[CreatedAt], [a].[DeactivatedAt], [a].[IsActive], [a].[MonthlyUsage], [a].[RenewsAt], [a].[UserId], [a].[VirtualPhoneNumber]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Username] = @__username_0
) AS [t]
LEFT JOIN [Accounts] AS [a] ON [t].[Id] = [a].[UserId]
ORDER BY [t].[Id]
2026-02-13 22:53:41 [INF] Fetching dashboard stats for user: MasterAdmin
2026-02-13 22:53:41 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CalleeId], [c].[CallerId], [c].[Cost], [c].[Duration], [c].[StartTime], [c].[Status], [c].[UserId]
FROM [CallRecords] AS [c]
WHERE [c].[UserId] = @__user_Id_0
2026-02-13 22:53:41 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType2`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType32`5[[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Decimal, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:53:41 [INF] Executed action VoIPPlatform.API.Controllers.DashboardController.GetUserStats (VoIPPlatform.API) in 4.624ms
2026-02-13 22:53:41 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.DashboardController.GetUserStats (VoIPPlatform.API)'
2026-02-13 22:53:41 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Dashboard/user-stats - 200 null application/json; charset=utf-8 5.7887ms
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - null null
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - 204 null null 0.3128ms
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - 204 null null 0.847ms
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - 204 null null 0.184ms
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/wallet/balance - 204 null null 0.2721ms
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/history - 204 null null 0.7401ms
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5004/api/payments/billing-info - 204 null null 0.2127ms
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/history - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Route matched with {action = "GetPaymentHistory", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[VoIPPlatform.API.Controllers.PaymentDto]]] GetPaymentHistory() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:53:44 [INF] Route matched with {action = "GetWalletBalance", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.WalletBalanceDto]] GetWalletBalance() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:53:44 [INF] Stripe API Key configured successfully
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Route matched with {action = "GetBillingInfo", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.BillingInfoDto]] GetBillingInfo() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:53:44 [INF] Stripe API Key configured successfully
2026-02-13 22:53:44 [INF] Stripe API Key configured successfully
2026-02-13 22:53:44 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[TransactionDate] DESC
2026-02-13 22:53:44 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:53:44 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[VoIPPlatform.API.Controllers.PaymentDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:53:44 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API) in 18.6226ms
2026-02-13 22:53:44 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.BillingInfoDto'.
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/history - 200 null application/json; charset=utf-8 19.5649ms
2026-02-13 22:53:44 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API) in 17.6379ms
2026-02-13 22:53:44 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - 200 null application/json; charset=utf-8 18.5567ms
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/history - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Route matched with {action = "GetPaymentHistory", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[VoIPPlatform.API.Controllers.PaymentDto]]] GetPaymentHistory() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Route matched with {action = "GetBillingInfo", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.BillingInfoDto]] GetBillingInfo() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:53:44 [INF] Stripe API Key configured successfully
2026-02-13 22:53:44 [INF] Stripe API Key configured successfully
2026-02-13 22:53:44 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:53:44 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[TransactionDate] DESC
2026-02-13 22:53:44 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[VoIPPlatform.API.Controllers.PaymentDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:53:44 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.BillingInfoDto'.
2026-02-13 22:53:44 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API) in 6.9253ms
2026-02-13 22:53:44 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API) in 6.5404ms
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/history - 200 null application/json; charset=utf-8 7.919ms
2026-02-13 22:53:44 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - 200 null application/json; charset=utf-8 7.1207ms
2026-02-13 22:53:44 [INF] Executed DbCommand (106ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Balance], [w].[CreatedAt], [w].[Currency], [w].[UpdatedAt], [w].[UserId]
FROM [Wallets] AS [w]
WHERE [w].[UserId] = @__userId_0
2026-02-13 22:53:44 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Wallets] ([Balance], [CreatedAt], [Currency], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2026-02-13 22:53:44 [INF] Created new wallet for user 3051
2026-02-13 22:53:44 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.WalletBalanceDto'.
2026-02-13 22:53:44 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API) in 137.867ms
2026-02-13 22:53:44 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - 200 null application/json; charset=utf-8 138.8686ms
2026-02-13 22:53:44 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:53:44 [INF] CORS policy execution successful.
2026-02-13 22:53:44 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Route matched with {action = "GetWalletBalance", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.WalletBalanceDto]] GetWalletBalance() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:53:44 [INF] Stripe API Key configured successfully
2026-02-13 22:53:44 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Balance], [w].[CreatedAt], [w].[Currency], [w].[UpdatedAt], [w].[UserId]
FROM [Wallets] AS [w]
WHERE [w].[UserId] = @__userId_0
2026-02-13 22:53:44 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.WalletBalanceDto'.
2026-02-13 22:53:44 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API) in 3.7558ms
2026-02-13 22:53:44 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:53:44 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - 200 null application/json; charset=utf-8 7.1233ms
2026-02-13 22:53:48 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - null null
2026-02-13 22:53:48 [INF] CORS policy execution successful.
2026-02-13 22:53:48 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:53:48 [INF] Route matched with {action = "GetWalletBalance", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.WalletBalanceDto]] GetWalletBalance() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:53:48 [INF] Stripe API Key configured successfully
2026-02-13 22:53:48 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/history - null null
2026-02-13 22:53:48 [INF] CORS policy execution successful.
2026-02-13 22:53:48 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:53:48 [INF] Route matched with {action = "GetPaymentHistory", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[VoIPPlatform.API.Controllers.PaymentDto]]] GetPaymentHistory() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:53:48 [INF] Stripe API Key configured successfully
2026-02-13 22:53:48 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - null null
2026-02-13 22:53:48 [INF] CORS policy execution successful.
2026-02-13 22:53:48 [INF] Executing endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:53:48 [INF] Route matched with {action = "GetBillingInfo", controller = "Payments"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[VoIPPlatform.API.Controllers.BillingInfoDto]] GetBillingInfo() on controller VoIPPlatform.API.Controllers.PaymentsController (VoIPPlatform.API).
2026-02-13 22:53:48 [INF] Stripe API Key configured successfully
2026-02-13 22:53:48 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [w].[Id], [w].[Balance], [w].[CreatedAt], [w].[Currency], [w].[UpdatedAt], [w].[UserId]
FROM [Wallets] AS [w]
WHERE [w].[UserId] = @__userId_0
2026-02-13 22:53:48 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.WalletBalanceDto'.
2026-02-13 22:53:48 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API) in 5.0951ms
2026-02-13 22:53:48 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetWalletBalance (VoIPPlatform.API)'
2026-02-13 22:53:48 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/wallet/balance - 200 null application/json; charset=utf-8 13.658ms
2026-02-13 22:53:48 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Amount], [p].[CreatedAt], [p].[ExternalTransactionId], [p].[InvoiceNumber], [p].[InvoicePdfPath], [p].[Notes], [p].[PaymentMethod], [p].[Status], [p].[TaxAmount], [p].[TotalPaid], [p].[TransactionDate], [p].[UserId]
FROM [Payments] AS [p]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[TransactionDate] DESC
2026-02-13 22:53:48 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccountBalance], [u].[ActiveCalls], [u].[Address], [u].[BillingType], [u].[ChannelRate], [u].[City], [u].[Country], [u].[CreatedAt], [u].[Email], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[LastLoginAt], [u].[LastName], [u].[MaxConcurrentCalls], [u].[ParentUserId], [u].[PasswordHash], [u].[PhoneNumber], [u].[PostalCode], [u].[ResellerId], [u].[Role], [u].[TariffPlanId], [u].[TaxRegistrationNumber], [u].[UpdatedAt], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2026-02-13 22:53:48 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[VoIPPlatform.API.Controllers.PaymentDto, VoIPPlatform.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-02-13 22:53:48 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API) in 5.4322ms
2026-02-13 22:53:48 [INF] Executing OkObjectResult, writing value of type 'VoIPPlatform.API.Controllers.BillingInfoDto'.
2026-02-13 22:53:48 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetPaymentHistory (VoIPPlatform.API)'
2026-02-13 22:53:48 [INF] Executed action VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API) in 3.2871ms
2026-02-13 22:53:48 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/history - 200 null application/json; charset=utf-8 6.1261ms
2026-02-13 22:53:48 [INF] Executed endpoint 'VoIPPlatform.API.Controllers.PaymentsController.GetBillingInfo (VoIPPlatform.API)'
2026-02-13 22:53:48 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/payments/billing-info - 200 null application/json; charset=utf-8 4.7012ms
